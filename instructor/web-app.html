<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Building a Search and Discovery Web App for Collaborative Multilingual Projects: Building the Search Web App</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png"><link rel="manifest" href="../favicons/incubator/site.webmanifest"><link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="A low-code search and discovery web app with Google Sheets &amp;amp; JavaScript for collaborative, multilingual projects" src="../assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../web-app.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="A low-code search and discovery web app with Google Sheets &amp;amp; JavaScript for collaborative, multilingual projects" src="../assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Building a Search and Discovery Web App for Collaborative Multilingual Projects
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Building a Search and Discovery Web App for Collaborative Multilingual Projects
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Building a Search and Discovery Web App for Collaborative Multilingual Projects
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 23%" class="percentage">
    23%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 23%" aria-valuenow="23" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../web-app.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="description-standards.html">1. Ethical and Multilingual Description Standards</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        2. Building the Search Web App
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#background">Background</a></li>
<li><a href="#functional-requirements">Functional Requirements</a></li>
<li><a href="#google-sheet-as-api-endpoint">Google Sheet as API Endpoint</a></li>
<li><a href="#get-your-data-getdata">Get your Data: getData()</a></li>
<li><a href="#display-your-data-displaydata">Display your Data: displayData()</a></li>
<li><a href="#filter-your-data-filterdata">Filter your Data: filterData()</a></li>
<li><a href="#refresh-button">Refresh Button</a></li>
<li><a href="#episode-summary">Episode Summary</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="translation.html">3. Translation</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="host-github.html">4. Host your Site on GitHub</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="action-plan.html">5. Promote Your Project and Prompt Participation and Collaboration</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/description-standards.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/translation.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/description-standards.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Ethical and
        </a>
        <a class="chapter-link float-end" href="../instructor/translation.html" rel="next">
          Next: Translation...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Building the Search Web App</h1>
        <p>Last updated on 2025-07-21 |

        <a href="https://github.com/ucla-imls-open-sci/lc-multilingual-search-discovery-system/edit/main/episodes/web-app.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 61 minutes</p>

        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>Based on my data, what are the functional requirements for a simple
search and discovery web app?</li>
<li>What is an API endpoint?</li>
<li>How can I use the JavaScript methods .get(), .filter(), and .map()
to retrieve my data, filter my data, and display my data on the web
app.</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Establish functional requirements for a web application.</li>
<li>Transform a Google Sheet into a simple API endpoint with Google App
Script.</li>
<li>Build three JavaScript functions that filter and display your Google
Sheet data on a website.</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a></h2>
<hr class="half-width"><p>In this episode, we will create a single page website that displays
data from a Google Sheet and lets users search through this data, all
using JavaScript. We’ll begin by establishing functional requirements
for your project. Functional requirements specify what the system should
do, and from there you can select what technology will best help you
meet those requirements.</p>
<p>Next, we’ll transform our Google Sheet into a database, converting it
to an API endpoint. You’ll learn about APIs and how they transfer data
from your spreadsheet to your website.</p>
<p>We’ll then connect our website and database. We’ll write some
JavaScript to fetch data from the spreadsheet and then display that data
to the user.</p>
<p>Finally, we’ll build the the search interface. This will include
<em>data normalization</em>, which ensures that small variations in
users’ searches do not result in wildly different results (e.g.,
variations in capitalization, accents, and special characters).</p>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<span class="callout-header">Prerequisite</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>Copy our <a href="https://docs.google.com/spreadsheets/d/19pTiNUP_PqqX0FlzMeEd5aZRWUj6lt9VU4SCwEm1f5I/edit?usp=sharing" class="external-link">LACLI
Sample Data</a> spreadsheet to a new folder in your Google Drive. You
can name this folder whatever you like.</li>
<li>Download these starting code files: <a href="https://github.com/ucla-imls-open-sci/lc-multilingual-search-discovery-system/raw/refs/heads/main/episodes/webapp/webapp.zip" class="external-link">webapp.zip</a>
</li>
</ul></div>
</div>
</div>
</section><section><h2 class="section-heading" id="functional-requirements">Functional Requirements<a class="anchor" aria-label="anchor" href="#functional-requirements"></a></h2>
<hr class="half-width"><p>In any technical project, it’s essential to establish clear
functional requirements before diving into the technical details.
Establishing these requirements from the start ensures that the team
stays focused on the project’s goals, rather than getting sidetracked by
fancy features or bells and whistles.</p>
<p>During the development of the LACLI project, we arrived at a series
of functional requirements. Many of which are shared by digital projects
in the humanities and social sciences:</p>
<table class="table"><colgroup><col width="53%"><col width="46%"></colgroup><thead><tr class="header"><th>Functional Requirement</th>
<th>Solution</th>
</tr></thead><tbody><tr class="odd"><td>A free, intuitive, and collaborative database solution that can be
easily edited by multiple volunteers without prior database
knowledge.</td>
<td>Google Sheets is a free, cloud-based spreadsheet solution that is
intuitive to use, supports real-time collaboration by multiple users,
and does not require extensive database knowledge.</td>
</tr><tr class="even"><td>Free web hosting services to store and access website files.</td>
<td>
<a href="https://pages.github.com/" class="external-link">GitHub Pages</a> allows you to
easily publish static websites directly from your GitHub repositories
and use custom URL.</td>
</tr><tr class="odd"><td>The client-side technology should be open-source and avoid the use
of front-end frameworks, which have a steep learning curve and can
dissuade collaboration among those unfamiliar with a given
framework.</td>
<td>JavaScript is the core programming language of the web and is
open-source. It provides for collaboration and easy maintenance as it is
framework independent.</td>
</tr><tr class="even"><td>The user interface should allow users to search through the data
using keywords and present resources in an attractive, easy-to-read
format that includes links to the original resources.</td>
<td>JavaScript can make API calls, filter data, and display data on a
webpage by injecting HTML into the site at run time.</td>
</tr><tr class="odd"><td>The website must be translatable.</td>
<td>JavaScript can create a translation table inside of an object to
switch the site’s text content.</td>
</tr></tbody></table><p>With this solution, the LACLI team can intutively edit data using
Google Sheets. The added benefit is that Google already has an entire
security infrastructure: you can set permissions of who can view,
comment, or edit files in Google Drive. We use JavaScript to get the
data from the spreadsheet to our website. The JavaScript file that does
that data manipulation, as well as the HTML and CSS files that give
structure and style to our site, all live in a GitHub repository and are
served to the public via their GitHub Pages service.</p>
<div id="write-your-own" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="write-your-own" class="callout-inner">
<h3 class="callout-title">Write Your Own</h3>
<div class="callout-content">
<p>Based on the functional requirement assessment above, create your own
two column table and list the functional requirements for your project
on one side. As you progress through this lesson, note what suggestions
provided here could be solutions to your specific functional
requirements.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="google-sheet-as-api-endpoint">Google Sheet as API Endpoint<a class="anchor" aria-label="anchor" href="#google-sheet-as-api-endpoint"></a></h2>
<hr class="half-width"><p>The first technological hurtle is the fact that a Google Sheet is not
automatically set up like a database. We will do this in three steps: 1.
Create a Google App Script file that uses the Google Sheets API. 2.
Write a script in that file that wraps up all the data in our
spreadsheet in JSON. 3. Launch our script as a web app, which creates a
unique API endpoint for our data and will permit our website to get that
data and bring it to the user’s browser.</p>
<p>An API is a set of protocols that delivers data to a website. We want
our site to receive the data in our spreadsheet as JSON (JavaScript
Object Notation), which is a text-based data format to transmit data
objects between a web server and a client-side application.</p>
<p>When we talk about <strong>server-side</strong>, we are talking about
operations that happen in the database on the servers. When we talk
about <strong>client-side</strong>, we are talking about operations that
occur in the user’s browser.</p>
<p>Activating the Google Sheet API and transforming our Spreadsheet into
JSON data requires that we create a Google App Script file.</p>
<p>In a Google Drive folder, make a copy of our <a href="https://docs.google.com/spreadsheets/d/19pTiNUP_PqqX0FlzMeEd5aZRWUj6lt9VU4SCwEm1f5I/edit?usp=sharing" class="external-link">LACLI
Sample Data</a> spreadsheet. In this same folder, we’ll create a Google
App Script file and name it <code>Convert Sheet to JSON</code>. This
video will show you how to create the file and add the Google Sheets API
under Services:</p>
<iframe src="https://drive.google.com/file/d/1WScfIWv2PFTf4IoY_Z01r3qIUa194Muk/preview" width="640" height="480" allow="autoplay">
</iframe>
<p>Now that the Sheets API is set up, we will instruct it to wrap up our
spreadsheet data in JSON. First, in the text editing window of Google
App Script, delete the default function:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">JAVASCRIPT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode javascript" tabindex="0"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">function</span> <span class="fu">myFunction</span>() {</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a> }</span></code></pre>
</div>
<p>We will replace it with the following code:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">JAVASCRIPT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode javascript" tabindex="0"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doGet</span>(request) {</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="kw">var</span> spreadsheetId <span class="op">=</span> <span class="st">'....'</span><span class="op">;</span> <span class="co">// Replace with Google Sheet ID</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="kw">var</span> sheetName <span class="op">=</span> <span class="st">'Main'</span><span class="op">;</span> <span class="co">// Replace with the sheet you want to retrieve data from</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="co">// make sure the advanced sheets service is enabled for this script</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="kw">var</span> dataValues <span class="op">=</span> Sheets<span class="op">.</span><span class="at">Spreadsheets</span><span class="op">.</span><span class="at">Values</span><span class="op">.</span><span class="fu">get</span>(spreadsheetId<span class="op">,</span> sheetName)<span class="op">.</span><span class="at">values</span><span class="op">;</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  </span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  <span class="co">// Change the index from 0 to 2 to use row 3 as column headings</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  <span class="kw">var</span> headers <span class="op">=</span> dataValues[<span class="dv">2</span>]<span class="op">;</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>  </span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>  <span class="kw">var</span> rows <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> i <span class="op">&lt;</span> dataValues<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) { <span class="co">// Start from row 4, as row 3 is the column headings</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>    <span class="kw">var</span> row <span class="op">=</span> {}<span class="op">;</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">var</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> headers<span class="op">.</span><span class="at">length</span><span class="op">;</span> j<span class="op">++</span>) {</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>      row[headers[j]] <span class="op">=</span> dataValues[i][j]<span class="op">;</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>    }</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>    rows<span class="op">.</span><span class="fu">push</span>(row)<span class="op">;</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>  }</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>  </span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>  <span class="kw">var</span> output <span class="op">=</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(rows)<span class="op">;</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>  <span class="cf">return</span> ContentService<span class="op">.</span><span class="fu">createTextOutput</span>(output)<span class="op">.</span><span class="fu">setMimeType</span>(ContentService<span class="op">.</span><span class="at">MimeType</span><span class="op">.</span><span class="at">JSON</span>)<span class="op">;</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a>}</span></code></pre>
</div>
<div class="section level3">
<h3 id="lets-take-this-code-step-by-step">Let’s take this code step by step:<a class="anchor" aria-label="anchor" href="#lets-take-this-code-step-by-step"></a></h3>
<ol style="list-style-type: decimal"><li>
<code>function doGet(request)</code> is a stock function in Google
App Script that handles a GET request made to your script’s web app URL.
A GET request simply gets data from a specific location.<br><br></li>
<li>Your spreadsheetid is available in the URL for the spreadsheet. Copy
the string of alphanumeric characters in the URL of your
spreadsheet:<br><br><img src="../fig/spreadsheet-url.png" alt="Screenshot of the spreadsheet’s URL." class="figure"><br><br></li>
<li>
<code>var headers = dataValues[2]</code>, sets the index of where
the JSON should read header names. Because in our spreadsheet we have 2
rows of contextual information at the top of the spreadheet, we want the
JSON to start on row 3 to find column header names.<br><br></li>
<li>
<code>var rows = [],</code> the script will loop over all rows to
add them to the JSON.<br><br></li>
</ol><p>The last step is launching the Apps Script web app:</p>
<iframe src="https://drive.google.com/file/d/1h3vF1022Ksv5TrI7_gnhYYw1FcAdhnL5/preview" width="640" height="480" allow="autoplay">
</iframe>
<div id="keep-the-url-handy" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="keep-the-url-handy" class="callout-inner">
<h3 class="callout-title">Keep the URL handy!</h3>
<div class="callout-content">
<p>At the end of the video, you see that a red box appears around the
Apps Script web app URL. This URL will act as our API endpoint and
enable our discovery system to import all the data from our Google Sheet
in JSON. Save this URL. You can also copy this URL into your browser,
hit return, and you’ll see all our spreadsheet data represented in
JSON.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="get-your-data-getdata">Get your Data: getData()<a class="anchor" aria-label="anchor" href="#get-your-data-getdata"></a></h2>
<hr class="half-width"><p>In this section we will take the API endpoint, which we created with
Apps Script, and connect it to our website. We’ll then display that data
on our website.</p>
<p>To begin, download the webapp startup code as a zip file: <a href="https://github.com/ucla-imls-open-sci/lc-multilingual-search-discovery-system/raw/refs/heads/main/episodes/webapp/webapp.zip" class="external-link">webapp.zip</a>.
This zip file contains the starting files for our website. The file
structure will look like this:</p>
<pre><code>–webapp
	–app.js
	–index.html
	–style.css</code></pre>
<p>Open index.html in the browser and you will see a basic structure for
our discovery system. I’ve already given you some basic styling. We
won’t be looking at style.css during this lesson, but feel free to
modify it later.</p>
<p>From top to bottom: we have our language selection buttons, which we
will use in a later episode to translate our page. Then we have our
search bar, search button, and refresh button. We will use these in the
next episode to enable users to search through the research data by with
keywords. Last, in the blank white space is where we will populate our
website with our research data.</p>
<figure><img src="../fig/basic-discovery-system.png" alt="Basic discovery interface." class="figure mx-auto d-block"><div class="figcaption">Basic discovery interface.</div>
</figure><p>Now open the <code>webapp</code> folder in your preferred Integrated
development environment (IDE). Let’s take a look at <code>app.js</code>,
which will drive our site’s functionality. Right now, we only have a
road map of how we will build our system:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co">// Define API endpoint and DOM elements</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="kw">const</span> googleSheet <span class="op">=</span> <span class="st">''</span><span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">// Get Data</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">// Filter Data</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">// Display Data</span></span></code></pre>
</div>
<p>In <code>app.js</code>, we have a variable <code>googleSheet</code>.
Let’s set this to the URL of the Apps Script web app by copying the URL
between the single quotes.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">const</span> googleSheet <span class="op">=</span> <span class="st">'https://script.google.com/macros/s/....'</span><span class="op">;</span></span></code></pre>
</div>
<p>Now we need to have <code>app.js</code> request that our Apps Script
web app send our site the JSON data. We will do this by creating our
first function, <code>getData()</code>. 1. Create an object called
apiData where we will store the incoming data.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="kw">let</span> apiData <span class="op">=</span> []<span class="op">;</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal"><li>Create an async function that will make a fetch request to our
Google Sheet.</li>
</ol><div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co">// Get data</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="kw">let</span> apiData <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">getData</span>(url) {</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>   <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(url)<span class="op">;</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>   <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>   apiData <span class="op">=</span> data<span class="op">;</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>}</span></code></pre>
</div>
<p>The <code>getData</code> function will use an API endpoint (the URL
of our Apps Script web app) to fetch data and save it in a object called
<code>response</code>. Next, we will format the response as JSON in an
object called <code>data</code>. Lastly, we assign that formatted data
from the fetch request as our <code>apiData</code> object.</p>
<p>A unique attribute of JavaScript are promises. Promises are objects
that represents the eventual completion (or failure) of an asynchronous
operation. Promises typically do not happen as soon as a page loads, but
take some time. In our case, we assign the async keyword before
declaring the getData function because we know that the request for the
Google Sheet data will take some time to reach our webpage. Similarly,
the await keyword is used when we make the fetch request and format our
fetch response in JSON because we are anticipating that the data will
not arrive when the page loads.</p>
<ol start="3" style="list-style-type: decimal"><li>As a result of using promises, it is best practice to use the
try/catch error handling block in our function in case there is some
error retrieving the data. Our final getData() function should look like
this:</li>
</ol><div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">// Get data</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="kw">let</span> apiData <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">getData</span>(url) {</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a> <span class="cf">try</span> {</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>   <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(url)<span class="op">;</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>   <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>   apiData <span class="op">=</span> data<span class="op">;</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a> } <span class="cf">catch</span> (error) {</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>   <span class="bu">window</span><span class="op">.</span><span class="fu">alert</span>(error<span class="op">.</span><span class="at">message</span>)<span class="op">;</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a> }</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>}</span></code></pre>
</div>
<ol start="4" style="list-style-type: decimal"><li>Lets test to make sure we are getting the data from our Google
Sheet. We can log our incoming data to the console. Right below line 7,
let’s add <code>console.log(apiData);</code> Our full
<code>app.js</code> should look like this:</li>
</ol><div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co">// Define API endpoint and DOM elements</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="kw">const</span> googleSheet <span class="op">=</span> <span class="st">'https://script.google.com/macros/s/...'</span><span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co">// Get data</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="kw">let</span> apiData <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">getData</span>(url) {</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a> <span class="cf">try</span> {</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>   <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(url)<span class="op">;</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>   <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>   apiData <span class="op">=</span> data<span class="op">;</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>   <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(apiData)<span class="op">;</span> <span class="co">//Test if data fetch is working correctly</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a> } <span class="cf">catch</span> (error) {</span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>   <span class="bu">window</span><span class="op">.</span><span class="fu">alert</span>(error<span class="op">.</span><span class="at">message</span>)<span class="op">;</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a> }</span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="fu">getData</span>(googleSheet)<span class="op">;</span></span></code></pre>
</div>
<ol start="5" style="list-style-type: decimal"><li>We now need to link our <code>app.js</code> file and our
<code>index.html</code>. Open up <code>index.html</code> and just before
the end body tag, link the <code>app.js</code> file:</li>
</ol><div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">INDEX.HTML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode index.html" tabindex="0"><code class="sourceCode djangotemplate"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>   <span class="kw">&lt;/main&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">"app.js"</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="kw">&lt;/body&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre>
</div>
<ol start="6" style="list-style-type: decimal"><li>Open <code>index.html</code> in the browser (I suggest Chrome) and
open developer tools. Then click on the console tab and you should see
your data in an array:</li>
</ol><iframe src="https://drive.google.com/file/d/1haD32ZBJpX2MTLqcu2fG4IJ0swM5Z5yQ/preview" width="640" height="480" allow="autoplay">
</iframe>
<div id="examine-the-json-object" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="examine-the-json-object" class="callout-inner">
<h3 class="callout-title">Examine the JSON Object</h3>
<div class="callout-content">
<p>Success! Lets look at this data to get a sense of what is going on.
Let’s expand the first item in the array:</p>
<pre class="console"><code><span><span class="fl">0</span><span class="op">:</span></span>
<span>  <span class="va">Assuntos_em_Portugues</span><span class="op">:</span> <span class="st">"Povos indígenas; Ambientalismo"</span></span>
<span>  <span class="va">Countries</span><span class="op">:</span> <span class="st">"Brasil"</span></span>
<span>  <span class="va">Institutional_Hosts</span><span class="op">:</span> <span class="st">"Instituto Socioambiental "</span></span>
<span>  <span class="va">Languages</span><span class="op">:</span> <span class="st">"Português"</span></span>
<span>  <span class="va">Materias_en_Espanol</span><span class="op">:</span> <span class="st">"Pueblos indígenas; Ambientalismo"</span></span>
<span>  <span class="va">Resource_Title</span><span class="op">:</span> <span class="st">"Acervo Digital sobre Povos Indígenas, Populações Tradicionais e Meio Ambiente"</span></span>
<span>  <span class="va">Resource_Types</span><span class="op">:</span> <span class="st">"Audiovisual Materials; Books; Texts (Other); Visual Materials"</span></span>
<span>  <span class="va">Subjects_in_English</span><span class="op">:</span> <span class="st">"Indigenous peoples; Environmentalism"</span></span>
<span>  <span class="va">Summary</span><span class="op">:</span> <span class="st">"\"O ISA possui um vasto acervo relativo a povos indígenas, populações tradicionais e meio ambiente, formado desde 1974, compreendendo diversos tipos de materiais arquivísticos, audiovisuais, bibliográficos (artigos, livros, dissertações e teses), e notícias de jornais.  O acervo está indexado por etnias, categorias de população tradicional (caiçaras, quilombolas, seringueiros), unidades de conservação, terras indígenas, biomas, bacias, temas (biodiversidade, educação e saúde indígena, energia, estradas, etnografia, florestas, mudanças climáticas, recursos hídricos, recursos minerais, política socioambiental, entre outros), sub-temas e palavras-chave.\""</span></span>
<span>  <span class="va">Time_Coverage</span><span class="op">:</span> <span class="st">"20th century; 21st century"</span></span>
<span>  <span class="va">URL</span><span class="op">:</span> <span class="st">"https://acervo.socioambiental.org/"</span></span></code></pre>
<p>JSON works in key-value format. This format will be the same for
every entry in our data. All the keys are exactly the column headings in
our Google Sheet. This is very useful because we can call specific
pieces of metadata about a resource by using the column headings. The
values, presented within quotes, are the data per row of our data. So,
for example, if we want to display the title of a resource in our data
table, we can ask JavaScript to show us the Resource_Title for a
specific row.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="display-your-data-displaydata">Display your Data: displayData()<a class="anchor" aria-label="anchor" href="#display-your-data-displaydata"></a></h2>
<hr class="half-width"><p>Now let’s move to displaying this data on the website in a
user-friendly format. In our <code>index.html</code> file, you will see
we have a <code>&lt;div&gt;</code> element with the id of “display”
within the <code>&lt;main&gt;</code> part of our document.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">INDEX.HTML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode index.html" tabindex="0"><code class="sourceCode djangotemplate"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>   <span class="kw">&lt;main&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>       <span class="kw">&lt;div</span> <span class="er">id</span><span class="ot">=</span><span class="st">"display"</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>   <span class="kw">&lt;/main&gt;</span></span></code></pre>
</div>
<p>To display our data, we will target
<code>&lt;div id="display"&gt;</code> in our <code>app.js</code> file
and dynamically inject html containing our data here. To target this
<code>&lt;div&gt;</code>, we will get this element by its id in
<code>app.js</code>:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="kw">const</span> display <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'display'</span>)<span class="op">;</span></span></code></pre>
</div>
<p>Now that it’s targeted, we can control the html injection with a new
function in <code>app.js</code> called <code>displayData()</code>:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="kw">const</span> display <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'display'</span>)<span class="op">;</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co">// Display data</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="kw">function</span> <span class="fu">displayData</span>(data) {</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a> <span class="kw">let</span> dataDisplay <span class="op">=</span> data<span class="op">.</span><span class="fu">map</span>((object) <span class="kw">=&gt;</span> {</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>   <span class="cf">return</span> <span class="vs">`</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="vs">&lt;h2&gt;</span><span class="sc">${</span>object<span class="op">.</span><span class="at">Resource_Title</span><span class="sc">}</span><span class="vs">&lt;/h2&gt;</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="vs">`</span><span class="op">;</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a> })<span class="op">.</span><span class="fu">join</span>(<span class="st">''</span>)<span class="op">;</span>  </span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a> display<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> dataDisplay<span class="op">;</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>}<span class="op">;</span></span></code></pre>
</div>
<p>This function takes our data as input. It then creates an object
called <code>dataDisplay</code> where we will store our formatted data
for display to the user.</p>
<p>The key part of <code>displayData()</code> is the use of the
<code>.map()</code> method. In Javascript, <code>.map()</code> creates a
new array from an existing array by applying a provided function to each
element in the existing array. In our project, <code>.map</code> will
take our data array, a create a new array, <code>dataDisplay</code>,
that will take each object and format it in html, ready to be injected
into <code>index.html</code>, which occurs in the last line of the code
above, <code>display.innerHTML = dataDisplay;</code></p>
<p><code>displayData()</code> iterates over all of our data and places
each object’s “Resource_Title” within <code>&lt;h2&gt;</code> tags. The
map function makes it easy to specify where you’d like what piece of
data within the html by calling:
<code>object.&lt;insert column name from spreadsheet&gt;</code>. In the
case of the title of each resource, we are using
<code>object.Resource_Title</code>.</p>
<p>Open <code>index.html</code> in the browser and you will see the
“Resource_Title” of each object in our data array now populating the
formerly blank white space below the search bar.</p>
<figure><img src="../fig/title-display.png" alt="Discovery interface displaying all resource titles." class="figure mx-auto d-block"><div class="figcaption">Discovery interface displaying all resource
titles.</div>
</figure><p>In our <a href="https://docs.google.com/spreadsheets/d/19pTiNUP_PqqX0FlzMeEd5aZRWUj6lt9VU4SCwEm1f5I/edit?usp=sharing" class="external-link">lacli-sample-data</a>
spreadsheet, we have a lot of other data about each resource that is
useful to users: - Resource_Types - Languages - Countries - URL -
Subjects_in_English - Materias_en_Espanol - Assuntos_em_Portugues -
Time_Coverage - Institutional_Hosts - Summary</p>
<p>We will have to make some decisions about the hierarchy in which we
display each resource’s data. And these decisions should make sense to
the user when they are reading through our site. For example, the
“Resource_Title” should serve as a “URL” link to the resource. Below the
title, we should have the “Institutional_Hosts.” The rest of the data is
there to describe the resource so that a user can quickly evaluate
whether they are interested in a given resource. Here is one possible
arrangement of this data in html:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">HTML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode html" tabindex="0"><code class="sourceCode html"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">article</span><span class="ot"> class</span><span class="op">=</span><span class="st">"item"</span><span class="dt">&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"item-header"</span><span class="dt">&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"${object.URL}"</span><span class="ot"> target</span><span class="op">=</span><span class="st">"_blank"</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"noopener noreferrer"</span><span class="dt">&gt;</span>${object.Resource_Title}<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>${object.Institutional_Hosts}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"item-description"</span><span class="dt">&gt;</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">"inline-label"</span><span class="dt">&gt;</span>Resource Types: <span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span>${object.Resource_Types}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">"inline-label"</span><span class="dt">&gt;</span>Subjects in English: <span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span>${object.Subjects_in_English}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">"inline-label"</span><span class="dt">&gt;</span>Materias en Español: <span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span>${object.Materias_en_Espanol}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">"inline-label"</span><span class="dt">&gt;</span>Assuntos em Português: <span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span>${object.Assuntos_em_Portugues}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">"inline-label"</span><span class="dt">&gt;</span>Languages: <span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span>${object.Languages}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">"inline-label"</span><span class="dt">&gt;</span>Countries: <span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span>${object.Countries}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">"inline-label"</span><span class="dt">&gt;</span>Time Coverage: <span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span>${object.Time_Coverage}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">span</span><span class="ot"> class</span><span class="op">=</span><span class="st">"inline-label"</span><span class="dt">&gt;</span>Summary: <span class="dt">&lt;/</span><span class="kw">span</span><span class="dt">&gt;</span>${object.Summary}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">article</span><span class="dt">&gt;</span></span></code></pre>
</div>
<p>Here you can see that we can call each different data element per
resource with the same notation we used when applying Resource_title:
<code>object.Resource_Title</code></p>
<p>Want to call the language of the resource?
<code>object.Languages</code>. Materias en Español?
<code>object.Materias_en_Espanol</code>. Again, all borrowing from the
column headings on our Google Sheet. We wrap each resource in an
<code>&lt;article&gt;</code> tag as it defines independent content and
thus improves accessibility by providing clear structure for assistive
technologies.</p>
<p>We can copy this html into our displayData() function like this:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="kw">const</span> display <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'display'</span>)<span class="op">;</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="co">// Display data</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="kw">function</span> <span class="fu">displayData</span>(data) {</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a> <span class="kw">let</span> dataDisplay <span class="op">=</span> data<span class="op">.</span><span class="fu">map</span>((object) <span class="kw">=&gt;</span> {</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>   <span class="cf">return</span> <span class="vs">`</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="vs">&lt;article class="item"&gt;</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="vs">   &lt;div class="item-header"&gt;</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="vs">       &lt;h2&gt;&lt;a href="</span><span class="sc">${</span>object<span class="op">.</span><span class="at">URL</span><span class="sc">}</span><span class="vs">" target="_blank" rel="noopener noreferrer"&gt;</span><span class="sc">${</span>object<span class="op">.</span><span class="at">Resource_Title</span><span class="sc">}</span><span class="vs">&lt;/a&gt;&lt;/h2&gt;</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="vs">       &lt;p&gt;</span><span class="sc">${</span>object<span class="op">.</span><span class="at">Institutional_Hosts</span><span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a><span class="vs">   &lt;/div&gt;</span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a><span class="vs">   &lt;div class="item-description"&gt;</span></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a><span class="vs">       &lt;p&gt;&lt;span class="inline-label"&gt;Resource Types: &lt;/span&gt;</span><span class="sc">${</span>object<span class="op">.</span><span class="at">Resource_Types</span><span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a><span class="vs">       &lt;p&gt;&lt;span class="inline-label"&gt;Subjects in English: &lt;/span&gt;</span><span class="sc">${</span>object<span class="op">.</span><span class="at">Subjects_in_English</span><span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a><span class="vs">       &lt;p&gt;&lt;span class="inline-label"&gt;Materias en Español: &lt;/span&gt;</span><span class="sc">${</span>object<span class="op">.</span><span class="at">Materias_en_Espanol</span><span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a><span class="vs">       &lt;p&gt;&lt;span class="inline-label"&gt;Assuntos em Português: &lt;/span&gt;</span><span class="sc">${</span>object<span class="op">.</span><span class="at">Assuntos_em_Portugues</span><span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a><span class="vs">       &lt;p&gt;&lt;span class="inline-label"&gt;Languages: &lt;/span&gt;</span><span class="sc">${</span>object<span class="op">.</span><span class="at">Languages</span><span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a><span class="vs">       &lt;p&gt;&lt;span class="inline-label"&gt;Countries: &lt;/span&gt;</span><span class="sc">${</span>object<span class="op">.</span><span class="at">Countries</span><span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a><span class="vs">       &lt;p&gt;&lt;span class="inline-label"&gt;Time Coverage: &lt;/span&gt;</span><span class="sc">${</span>object<span class="op">.</span><span class="at">Time_Coverage</span><span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a><span class="vs">       &lt;p&gt;&lt;span class="inline-label"&gt;Summary: &lt;/span&gt;</span><span class="sc">${</span>object<span class="op">.</span><span class="at">Summary</span><span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a><span class="vs">   &lt;/div&gt;</span></span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a><span class="vs">&lt;/article&gt;</span></span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a><span class="vs">   `</span><span class="op">;</span></span>
<span id="cb16-24"><a href="#cb16-24" tabindex="-1"></a> })<span class="op">.</span><span class="fu">join</span>(<span class="st">''</span>)<span class="op">;</span>  </span>
<span id="cb16-25"><a href="#cb16-25" tabindex="-1"></a></span>
<span id="cb16-26"><a href="#cb16-26" tabindex="-1"></a> display<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> dataDisplay<span class="op">;</span></span>
<span id="cb16-27"><a href="#cb16-27" tabindex="-1"></a>}<span class="op">;</span></span></code></pre>
</div>
<p>The CSS I’ve already provided will handle the formatting of our data,
to aid in readability and reinforce our hierarchy of information.</p>
<figure><img src="../fig/styled-resource-display.png" alt="CSS applied to resources display." class="figure mx-auto d-block"><div class="figcaption">CSS applied to resources display.</div>
</figure><div id="what-weve-accomplished-so-far" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="what-weve-accomplished-so-far" class="callout-inner">
<h3 class="callout-title">What we’ve accomplished so far</h3>
<div class="callout-content">
<p>This flowchart recaps the key functions we’ve written that move the
data from our spreadsheet to our website.</p>
<figure><img src="../fig/flow-chart.png" alt="Flowchart of data from spreadsheet to web app." class="figure mx-auto d-block"><div class="figcaption">Flowchart of data from spreadsheet to web
app.</div>
</figure></div>
</div>
</div>
</section><section><h2 class="section-heading" id="filter-your-data-filterdata">Filter your Data: filterData()<a class="anchor" aria-label="anchor" href="#filter-your-data-filterdata"></a></h2>
<hr class="half-width"><p>Up to this point, we’ve focused on connecting our site to our Google
Sheet API and displaying that data in the browser. We haven’t touched
the search functionality.</p>
<p>To call this functionality “searching” very much anthropomorphizes
the code. Humans search using a variety of emotion, reason, and what we
might call algorithms to sift through information to determine what is
most relevant at a given time. What our will do is much simpler and a
better way to describe it is filtering the data. We will filter the data
according to whether the data we have describing a resource matches or
does not match the user’s keywords. For example, if a user enters the
keyword “periodicals,” we want to return all resources whose
“Resource_Types” include “periodicals.”</p>
<p>Filtering the data will occur after the browser has received data
from the Google Sheet API, the <code>getData()</code> function, and
before that data is displayed on the website to the user, the
<code>displayData()</code> function.</p>
<p>It is very important to remember that after getData() is called, all
of the data is loaded into the user’s browser. This means that once the
page loads, and the getData() promise is resolved, our website will not
request data again from our Google Sheet API. All our filtering will
occur on the client-side, which is to say in the browser and not in our
Google Sheet database. This organization helps us achieve the Functional
Requirements we established in Episode 2.1 and has a few benefits:</p>
<ul><li>After <code>getData()</code> loads the data, filtering data is
almost instantaneous, because we do not need to keep requesting new data
from the Google Sheets API.</li>
<li>As laid out in the Functional Requirements at the start of this
episode, we want free database and web hosting solutions. Limiting our
API requests ensures that we can continue with Google Sheets as our
simple database.</li>
<li>Security: We want a simple web solution, and a single get request
from the API excludes any two way communication with our server, such as
Post requests or the ability of users to inject malicious code back into
our database. Our system is very simple, and this simplicity is its
strength.</li>
</ul><p>Let’s take a look at our search bar in our
<code>index.html</code>:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">INDEX.HTML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode index.html" tabindex="0"><code class="sourceCode djangotemplate"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">"search-bar"</span><span class="kw">&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>               <span class="kw">&lt;input</span> <span class="er">id</span><span class="ot">=</span><span class="st">"input"</span> <span class="er">autocomplete</span><span class="ot">=</span><span class="st">"off"</span> <span class="er">type</span><span class="ot">=</span><span class="st">"text"</span> <span class="er">aria-label</span><span class="ot">=</span><span class="st">"Enter keywords to search"</span><span class="kw">&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>               <span class="kw">&lt;button</span> <span class="er">id</span><span class="ot">=</span><span class="st">"search-btn"</span> <span class="er">aria-label</span><span class="ot">=</span><span class="st">"Run search button"</span><span class="kw">&gt;</span>Search<span class="kw">&lt;/button&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>               <span class="kw">&lt;button</span> <span class="er">id</span><span class="ot">=</span><span class="st">"refresh-btn"</span> <span class="er">title</span><span class="ot">=</span><span class="st">"Refresh"</span> <span class="er">aria-label</span><span class="ot">=</span><span class="st">"Refresh search results button"</span><span class="kw">&gt;</span>Refresh<span class="kw">&lt;/button&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="kw">&lt;/div&gt;</span></span></code></pre>
</div>
<p>In html, search bars are created using <code>&lt;input&gt;</code>
elements. Ours additionally has the id of “input.” We also have a search
button, this is the first <code>&lt;button&gt;</code> element with an id
of “search-btn.” We need to capture these two elements in our
<code>app.js</code> file in order to process a user’s search.</p>
<p>Switching to <code>app.js</code>, let’s target these two html
elements:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co">// Define API endpoint and DOM elements</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="kw">const</span> googleSheet <span class="op">=</span> <span class="st">'&lt;your Google Sheet API here&gt;'</span><span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="kw">const</span> display <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'display'</span>)<span class="op">;</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="kw">const</span> input <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'input'</span>)<span class="op">;</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="kw">const</span> searchBtn <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'search-btn'</span>)<span class="op">;</span></span></code></pre>
</div>
<p>The first goal is to capture a user’s keywords in the search bar.</p>
<ol style="list-style-type: decimal"><li>Let’s create a function called <code>runSearch()</code> that will
process a user’s keywords. <code>searchTerms</code> will get us the
value inside the <code>&lt;input&gt;</code> html element as well as trim
off any incidental white space at the beginning or end of the user’s
keywords. For now, we will <code>console.log</code> the user’s
keywords.</li>
</ol><div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co">// Filter data</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="kw">function</span> <span class="fu">runSearch</span>() {</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a> <span class="kw">const</span> searchTerms <span class="op">=</span> input<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a> <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(searchTerms)</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>}</span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal"><li>Now we need to create an event listener that will trigger the
runSearch(). An event listener in JavaScript is a function that is
triggered when a user interacts with an HTML element. In our case, we
want to trigger runSearch() when the user hits the return key or clicks
the search button.</li>
</ol><div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co">// Event listeners for search bar</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co">// When the user clicks the search button</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>searchBtn<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'click'</span><span class="op">,</span> runSearch)<span class="op">;</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="co">// When the user presses the return key in the search window</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>input<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'keypress'</span><span class="op">,</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>   <span class="cf">if</span> (<span class="bu">event</span><span class="op">.</span><span class="fu">key</span> <span class="op">===</span> <span class="st">'Enter'</span>) {</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>       <span class="fu">runSearch</span>()<span class="op">;</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>   }</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>})<span class="op">;</span></span></code></pre>
</div>
<p>In this video you can see that when there is text in the search bar
and the user either hits the return key or presses the search button,
our <code>runSearch()</code> function is activated and in turn logs the
text in the console.</p>
<iframe src="https://drive.google.com/file/d/1B9Ls7CKPQVMIw6qpalQZLH7pU0vn1gcP/preview" width="640" height="480" allow="autoplay">
</iframe>
<p>Now we can create our <code>filterData()</code> function. First,
create a function called <code>filterData()</code> and have it accept as
an argument the user’s query. We capture this query in the
<code>runSearch()</code> function. We want to first have some logic
here. We want to check whether or not a user even has a keyword in the
search bar. Maybe they hit the search button without entering any
keywords.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">function</span> <span class="fu">filterData</span>(query) {</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a> <span class="cf">if</span> (query) {</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a> <span class="co">// Our filter function will go here</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a> } <span class="cf">else</span> {</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>   <span class="fu">displayData</span>(apiData)<span class="op">;</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a> }</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>}<span class="op">;</span></span></code></pre>
</div>
<p>In this case, if the user does provide a query, our function will do
something with that query to filter our data. If the user does not
provide a query, our function does nothing and passes along the full
dataset from our API to our displayData() function.</p>
<div class="section level3">
<h3 id="normalization">Normalization<a class="anchor" aria-label="anchor" href="#normalization"></a></h3>
<p>We need to consider the variety of ways our users might search for
material:</p>
<ul><li>
<strong>Capitalization:</strong> Some users may capitalize words
differently. They might use CAPSLOCK or all lowercase or Title Case
Their Searches. Our filter function needs to be ready to handle all of
these cases.</li>
<li>
<strong>Word Order:</strong> We want to search each keyword as if it
were a unique search term as opposed to searching with one long string.
For example, if we search as one string, and a user searches “art in
mexico” or “mexico art,” the filter function will only return results
that also have the words in the same order. What the user wants is all
resources that mention art <em>and</em> mexico.</li>
<li>
<strong>Diacritics:</strong> Diacritics are the accent marks used in
Spanish. Given that we are looking at a bilingual database and expect
Spanish speaking users, we need to manage diacritics. It is best to make
our filtering diacritic agnostic. For example, someone could misspell
Pueblos indígenas as Pueblos <em>indigenas</em>.</li>
</ul><p>The process to manage all the variety of ways users might enter
search terms is called normalization. We will normalize all search input
to prevent our filter function from excluding results because of
capitalized letters, word order, or missing diacritics.</p>
<p>JavaScript makes normalizing for capitalization and word order easy.
Let’s return to our <code>filterData()</code> function, and add this
code if a user supplies a query:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="kw">function</span> <span class="fu">filterData</span>(query) {</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a> <span class="cf">if</span> (query) {</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>     <span class="kw">const</span> searchTerms <span class="op">=</span> query<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">\s+</span><span class="ss">/</span>)</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a> } <span class="cf">else</span> {</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>   <span class="fu">displayData</span>(apiData)<span class="op">;</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a> }</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>}<span class="op">;</span></span></code></pre>
</div>
<p>We created a new variable called <code>searchTerms</code>. Inside
this variable, we first apply the <code>.toLowerCase()</code> method
which makes the user’s input keywords in lowercase and should eliminate
any problems around mismatched capitalization. Then we use the
<code>.split()</code> method to split up the user’s input on each space
(/+/) which is a regular expression that identifies spaces and creates a
new search term on the space. In the end, searchTerms will be an array
of search terms that we will use to filter our data.</p>
<p>Diacritics require an additional step: we must create our own
function that will strip the diacritics from the user’s keywords:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="kw">function</span> <span class="fu">removeDiacritics</span>(str) {</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a> <span class="cf">return</span> str<span class="op">.</span><span class="fu">normalize</span>(<span class="st">"NFD"</span>)<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">[\u0300-\u036f]</span><span class="ss">/g</span><span class="op">,</span> <span class="st">""</span>)<span class="op">;</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>}<span class="op">;</span></span></code></pre>
</div>
<p>This function takes a string (the user’s input) and applies
<code>.normalize("NFD")</code>. This command normalizes the input string
using the “Normalization Form D” (NFD) algorithm, which separates base
characters and diacritic markings. For example, “é” becomes “e” and ’.
Then the <code>.replace()</code> method replaces all diacritic marks
with an empty string. The g flag ensures that all markings within the
string are replaced.</p>
<p>Now let’s add this <code>removeDiacritics</code> function and finish
normalizing the user’s input:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="kw">function</span> <span class="fu">filterData</span>(query) {</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a> <span class="cf">if</span> (query) {</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>     <span class="kw">const</span> searchTerms <span class="op">=</span> query<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">\s+</span><span class="ss">/</span>)<span class="op">.</span><span class="fu">map</span>(term <span class="kw">=&gt;</span> <span class="fu">removeDiacritics</span>(term))<span class="op">;</span></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a> } <span class="cf">else</span> {</span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a>   <span class="fu">displayData</span>(apiData)<span class="op">;</span></span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a> }</span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a>}<span class="op">;</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="apply--map">Apply .map()<a class="anchor" aria-label="anchor" href="#apply--map"></a></h3>
<p>The <code>.map()</code> function is very useful in JavaScript: it
creates a new array by applying a function to each element of the
original array. That’s important because remember that searchTerms is
actually an array of every term, separated by spaces, from the user’s
input. We use the arrow function, which takes each term in the array and
applies the <code>removeDiacritics</code> function on that argument.</p>
<p>Now that we’ve normalized the user’s search terms, we can use it to
filter the data. We will use the JavaScript <code>filter()</code>
function to return only those results in our data that match the user’s
search keywords:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co">// Filter data</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="kw">function</span> <span class="fu">filterData</span>(query) {</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a> <span class="cf">if</span> (query) {</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>   <span class="kw">const</span> searchTerms <span class="op">=</span> query<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">\s+</span><span class="ss">/</span>)<span class="op">.</span><span class="fu">map</span>(term <span class="kw">=&gt;</span> <span class="fu">removeDiacritics</span>(term))<span class="op">;</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>   <span class="kw">const</span> filteredData <span class="op">=</span> apiData<span class="op">.</span><span class="fu">filter</span>(allData <span class="kw">=&gt;</span> {</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>     <span class="cf">return</span> searchTerms<span class="op">.</span><span class="fu">every</span>(term <span class="kw">=&gt;</span> {</span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a>       <span class="cf">return</span> (</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>         <span class="bu">Object</span><span class="op">.</span><span class="fu">values</span>(allData)<span class="op">.</span><span class="fu">some</span>(value <span class="kw">=&gt;</span> {</span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a>           <span class="cf">if</span> (value <span class="op">&amp;&amp;</span> <span class="kw">typeof</span> value <span class="op">===</span> <span class="st">'string'</span>) {</span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a>             <span class="cf">return</span> <span class="fu">removeDiacritics</span>(value<span class="op">.</span><span class="fu">toLowerCase</span>())<span class="op">.</span><span class="fu">includes</span>(term)<span class="op">;</span></span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a>           }</span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a>           <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a>         })</span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a>       )<span class="op">;</span></span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a>     })<span class="op">;</span></span>
<span id="cb25-17"><a href="#cb25-17" tabindex="-1"></a>   })<span class="op">;</span></span>
<span id="cb25-18"><a href="#cb25-18" tabindex="-1"></a></span>
<span id="cb25-19"><a href="#cb25-19" tabindex="-1"></a>   <span class="fu">displayData</span>(filteredData)<span class="op">;</span></span>
<span id="cb25-20"><a href="#cb25-20" tabindex="-1"></a> } <span class="cf">else</span> {</span>
<span id="cb25-21"><a href="#cb25-21" tabindex="-1"></a>   <span class="fu">displayData</span>(apiData)<span class="op">;</span></span>
<span id="cb25-22"><a href="#cb25-22" tabindex="-1"></a> }</span>
<span id="cb25-23"><a href="#cb25-23" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb25-24"><a href="#cb25-24" tabindex="-1"></a></span>
<span id="cb25-25"><a href="#cb25-25" tabindex="-1"></a>     })<span class="op">;</span></span>
<span id="cb25-26"><a href="#cb25-26" tabindex="-1"></a>   })<span class="op">;</span></span>
<span id="cb25-27"><a href="#cb25-27" tabindex="-1"></a></span>
<span id="cb25-28"><a href="#cb25-28" tabindex="-1"></a>   <span class="fu">displayData</span>(filteredData)<span class="op">;</span></span>
<span id="cb25-29"><a href="#cb25-29" tabindex="-1"></a> } <span class="cf">else</span> {</span>
<span id="cb25-30"><a href="#cb25-30" tabindex="-1"></a>   <span class="fu">displayData</span>(apiData)<span class="op">;</span></span>
<span id="cb25-31"><a href="#cb25-31" tabindex="-1"></a> }</span>
<span id="cb25-32"><a href="#cb25-32" tabindex="-1"></a>}</span></code></pre>
</div>
<div id="filter-every-some" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="filter-every-some" class="callout-inner">
<h3 class="callout-title">filter(), every(), &amp; some()</h3>
<div class="callout-content">
<p>We use three important methods to conduct the search: filter(),
every(), and some().</p>
<ol style="list-style-type: decimal"><li>
<strong>Filter()</strong> We use to iterate over every object in our
API data to determine if it matches with the user’s search
keywords.</li>
<li>
<strong>Every()</strong> Iterates over each search term in the
searchTerms array. If all search terms match, the <code>every()</code>
method returns true, indicating that the object should be included in
the filtered results.</li>
<li>
<strong>Some()</strong> Here is where the real matching occurs. It
is iterating over all the values for each object in the array. We can
think of each object in the array of API data as one resource in our
dataset. The values of the object are those we have in our dataset per
resource. For example, Resource_Title, Materias_en_Espanol, Languages,
and Summary. The <code>Some()</code> function will take each search term
and see if it matches within the values of an object and returns a
boolean true or false. All search terms be true meaning that a resource
must contain all the search terms in order for it to be included in the
filteredData object. Within this some function, we include a bit of
logic and processing on the API data. We first check that the data is a
string, this way we can match the string of the user’s input to the
string in the data. If it is a string, we apply the same normalization
of capitalization and diacritics we applied to the keywords to the data.
This way we remove any possibility for a missed match due to differences
in capitalization or diacritic placement. In other words, we compare
lowercase, diacritic-free search terms with lowercase, diacritic-free
data.</li>
</ol></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="displaying-filtered-data">Displaying Filtered Data<a class="anchor" aria-label="anchor" href="#displaying-filtered-data"></a></h3>
<p>In the end, we pass our <code>filteredData</code> array to our
<code>displayData()</code> function to display the search results to our
user.</p>
<p>Now we are ready to test it. We need to make a small change to our
runSearch() function, which at this time is logging our searchTerms to
the console. We want to now pass the user’s supplied keywords to our new
filterData() function like this:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co">// Filter data</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="kw">function</span> <span class="fu">runSearch</span>() {</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a> <span class="kw">const</span> searchTerms <span class="op">=</span> input<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a> <span class="fu">filterData</span>(searchTerms)<span class="op">;</span></span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a>}</span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="refresh-button">Refresh Button<a class="anchor" aria-label="anchor" href="#refresh-button"></a></h2>
<hr class="half-width"><p>The last feature we need to add is a refresh button. This button will
show all our resources without forcing the user to refresh the page.</p>
<p>Let’s identify the refresh button in <code>app.js</code>:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="kw">const</span> refreshBtn <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'refresh-btn'</span>)<span class="op">;</span></span></code></pre>
</div>
<p>This button will clear all user keywords so they see all resources
with no filtering. We will do this by running the
<code>runSearch()</code> function with no user keywords.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">APP.JS<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode app.js" tabindex="0"><code class="sourceCode javascript"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>refreshBtn<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'click'</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a> input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> <span class="st">''</span><span class="op">;</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a> <span class="fu">runSearch</span>()<span class="op">;</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>})<span class="op">;</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="episode-summary">Episode Summary<a class="anchor" aria-label="anchor" href="#episode-summary"></a></h2>
<hr class="half-width"><div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<p><strong>Establishing Functional Requirements:</strong> We learned how
to define clear goals for a technical project, identifying optimal,
free, and open-source solutions like Google Sheets, GitHub Pages, and
Vanilla JavaScript for building a robust search and discovery
system.</p>
<p><strong>Transforming Google Sheets into a Database:</strong> We
successfully converted a Google Sheet into a dynamic JSON-based API
endpoint using Google App Script, enabling our website to retrieve and
utilize the data.</p>
<p><strong>Connecting Website and Database:</strong> We developed the
JavaScript <code>getData()</code> function to fetch JSON data from our
Google Sheet API and the <code>displayData()</code> function to present
this information effectively on the webpage.</p>
<p><strong>Implementing Data Filtering and Search:</strong> We built
robust client-side filtering capabilities, including normalization for
capitalization and diacritics, allowing users to search the displayed
data efficiently.</p>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/description-standards.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/translation.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/description-standards.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Ethical and
        </a>
        <a class="chapter-link float-end" href="../instructor/translation.html" rel="next">
          Next: Translation...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/ucla-imls-open-sci/lc-multilingual-search-discovery-system/edit/main/episodes/web-app.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/ucla-imls-open-sci/lc-multilingual-search-discovery-system/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/ucla-imls-open-sci/lc-multilingual-search-discovery-system/" class="external-link">Source</a></p>
				<p><a href="https://github.com/ucla-imls-open-sci/lc-multilingual-search-discovery-system/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:eric.silberberg@qc.cuny.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://ucla-imls-open-sci.github.io/lc-multilingual-search-discovery-system/instructor/web-app.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "Google Sheets, Google AppsScript, JavaScript, multilingual, description standards",
  "name": "Building the Search Web App",
  "creativeWorkStatus": "active",
  "url": "https://ucla-imls-open-sci.github.io/lc-multilingual-search-discovery-system/instructor/web-app.html",
  "identifier": "https://ucla-imls-open-sci.github.io/lc-multilingual-search-discovery-system/instructor/web-app.html",
  "dateCreated": "2024-09-01",
  "dateModified": "2025-07-21",
  "datePublished": "2025-12-02"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

